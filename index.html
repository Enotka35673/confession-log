<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CONFESSION-LOG_0173</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
      font-family: 'VT323', monospace;
      height: 100%;
      overflow: hidden;
    }

    #frame {
      border: 2px solid white;
      padding: 20px;
      width: 80%;
      max-width: 800px;
      height: 400px;
      margin: 50px auto;
      position: relative;
      box-sizing: border-box;
      overflow: hidden;
      animation: floating 4s infinite ease-in-out;
    }

    @keyframes floating {
      0%, 100% {
        transform: translate(0, 0);
      }
      50% {
        transform: translate(1px, -1px);
      }
    }

    #startBtn {
      padding: 10px 20px;
      border: 2px solid white;
      color: white;
      background: none;
      font-size: 1.5em;
      cursor: pointer;
      font-family: 'VT323', monospace;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .fuchsia {
      color: fuchsia;
    }

    #gif {
      display: none;
      width: 100%;
      height: auto;
      margin-top: 10px;
    }

    .glitch {
      animation: glitch 1s infinite;
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-1px, 1px); }
      40% { transform: translate(1px, -1px); }
      60% { transform: translate(-1px, -2px); }
      80% { transform: translate(1px, 2px); }
      100% { transform: translate(0); }
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<body>
  <div id="frame">
    <button id="startBtn">Click to start...</button>
    <pre id="output"></pre>
    <img id="gif" src="giphy.gif" alt="glitch gif">
  </div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const output = document.getElementById('output');
    const gif = document.getElementById('gif');

    const stage1 = `>> CONFESSION-LOG_0173 :: ACCESS GRANTED\n>> SYSTEM MESSAGE: ERROR_173: CONFESSION CORRUPTED\n\n>> Parsing soul fragment...\n\n>> [IN LUMEN VERITAS]\n. . .\n\n>> ██ Data stream unstable ██\n\n>> Salvation Attempt: FAILED\n\n`;

    const stage2 = `>> SUBJECT 0173: <span class='fuchsia'>“I prayed. No one answered.”</span>\n>> SUBJECT 0173: <span class='fuchsia'>“I heard laughter in the static.”</span>\n\n>> Faith checksum: NULL\n\n`;

    const stage3 = `>> > SYSTEM RESPONSE:`;

    const finalText = `░░░ WE SEE YOU ░░░`;

    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function typeText(text, el, delayTime = 50) {
      el.innerHTML = '';
      for (let i = 0; i < text.length; i++) {
        el.innerHTML += text[i];
        if (text[i] === '.' && text[i+1] === ' ' && text[i+2] === '.') {
          await delay(1000);
        }
        await delay(delayTime);
      }
    }

    async function startSequence() {
      startBtn.style.display = 'none';
      await typeText(stage1, output, 50);
      await delay(1000);
      output.innerHTML = '';
      await delay(1000);
      gif.style.display = 'block';
      await typeText(stage2, output, 80);
      await delay(3000);
      output.innerHTML = '';
      gif.style.display = 'none';
      await typeText(stage3, output, 60);
      await delay(7000);
      document.body.innerHTML = '<div id="frame" class="glitch"><pre style="color:red; font-size:2em; text-align:center">' + finalText + '</pre></div>';
      setTimeout(() => {
        const junk = setInterval(() => {
          const div = document.createElement('div');
          div.style.position = 'absolute';
          div.style.top = Math.random() * window.innerHeight + 'px';
          div.style.left = Math.random() * window.innerWidth + 'px';
          div.style.color = 'red';
          div.style.fontSize = '1em';
          div.innerText = finalText;
          document.body.appendChild(div);
        }, 100);
        setTimeout(() => {
          clearInterval(junk);
          document.body.innerHTML = '<div style="background:black; width:100%; height:100%;"></div>';
        }, 3000);
      }, 5000);
    }

    startBtn.addEventListener('click', startSequence);
  </script>
</body>

</html>
